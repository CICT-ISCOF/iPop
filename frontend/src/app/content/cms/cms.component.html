<app-preview *ngIf="preview"></app-preview>


<div class="cms-component">
    <br>

    <ul class="nav nav-pills nav-fill mobile-nav">
        <li class="nav-item">
            <a class="nav-link" (click)="changeTab('newContent')" [class.active]="tabs.newContent">
               New Content
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" (click)="changeTab('contentList')" [class.active]="tabs.contentList">
                Content List
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" (click)="changeTab('newQuickLink')" [class.active]="tabs.newQuickLink">
               New Quick Link
            </a>
        </li>

        <li class="nav-item">
            <a class="nav-link" (click)="changeTab('quickLinks')" [class.active]="tabs.quickLinks">
                 Quick Links
            </a>
        </li>
    </ul>

    <ul class="nav nav-pills nav-fill desktop">
        <li class="nav-item">
            <a class="nav-link" (click)="changeTab('newContent')" [class.active]="tabs.newContent">
                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-folder-plus" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M9.828 4H2.19a1 1 0 0 0-.996 1.09l.637 7a1 1 0 0 0 .995.91H9v1H2.826a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31L.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3h3.982a2 2 0 0 1 1.992 2.181L15.546 8H14.54l.265-2.91A1 1 0 0 0 13.81 4H9.828zm-2.95-1.707L7.587 3H2.19c-.24 0-.47.042-.684.12L1.5 2.98a1 1 0 0 1 1-.98h3.672a1 1 0 0 1 .707.293z"/>
                    <path fill-rule="evenodd" d="M13.5 10a.5.5 0 0 1 .5.5V12h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0V13h-1.5a.5.5 0 0 1 0-1H13v-1.5a.5.5 0 0 1 .5-.5z"/>
                </svg>
                 New Content
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" (click)="changeTab('contentList')" [class.active]="tabs.contentList">
                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-journal-text" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3 0h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1h1v1a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v1H1V2a2 2 0 0 1 2-2z"/>
                    <path d="M1 5v-.5a.5.5 0 0 1 1 0V5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0V8h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1z"/>
                    <path fill-rule="evenodd" d="M5 10.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5zm0-2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5zm0-2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5zm0-2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5z"/>
                </svg>
                Content List
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" (click)="changeTab('newQuickLink')" [class.active]="tabs.newQuickLink">
                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-clipboard-plus" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
                    <path fill-rule="evenodd" d="M9.5 1h-3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3zM8 7a.5.5 0 0 1 .5.5V9H10a.5.5 0 0 1 0 1H8.5v1.5a.5.5 0 0 1-1 0V10H6a.5.5 0 0 1 0-1h1.5V7.5A.5.5 0 0 1 8 7z"/>
                </svg>
                New Quick Link
            </a>
        </li>

        <li class="nav-item">           
            <a class="nav-link" (click)="changeTab('quickLinks')" [class.active]="tabs.quickLinks">
                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-list-stars" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5z"/>
                    <path d="M2.242 2.194a.27.27 0 0 1 .516 0l.162.53c.035.115.14.194.258.194h.551c.259 0 .37.333.164.493l-.468.363a.277.277 0 0 0-.094.3l.173.569c.078.256-.213.462-.423.3l-.417-.324a.267.267 0 0 0-.328 0l-.417.323c-.21.163-.5-.043-.423-.299l.173-.57a.277.277 0 0 0-.094-.299l-.468-.363c-.206-.16-.095-.493.164-.493h.55a.271.271 0 0 0 .259-.194l.162-.53zm0 4a.27.27 0 0 1 .516 0l.162.53c.035.115.14.194.258.194h.551c.259 0 .37.333.164.493l-.468.363a.277.277 0 0 0-.094.3l.173.569c.078.255-.213.462-.423.3l-.417-.324a.267.267 0 0 0-.328 0l-.417.323c-.21.163-.5-.043-.423-.299l.173-.57a.277.277 0 0 0-.094-.299l-.468-.363c-.206-.16-.095-.493.164-.493h.55a.271.271 0 0 0 .259-.194l.162-.53zm0 4a.27.27 0 0 1 .516 0l.162.53c.035.115.14.194.258.194h.551c.259 0 .37.333.164.493l-.468.363a.277.277 0 0 0-.094.3l.173.569c.078.255-.213.462-.423.3l-.417-.324a.267.267 0 0 0-.328 0l-.417.323c-.21.163-.5-.043-.423-.299l.173-.57a.277.277 0 0 0-.094-.299l-.468-.363c-.206-.16-.095-.493.164-.493h.55a.271.271 0 0 0 .259-.194l.162-.53z"/>
                </svg>
                Quick Links
            </a>
        </li>
    </ul>


    <app-quick-links-list *ngIf="tabs.quickLinks"></app-quick-links-list>
    <app-new-quick-links *ngIf="tabs.newQuickLink"></app-new-quick-links>
    <app-contents-list *ngIf="tabs.contentList"></app-contents-list>

    <div *ngIf="tabs.newContent" class="new-content">

        <div class="action-buttons">
            <div (click)="previewData()" class="preview" tooltip="Preview" placement="bottom" [theme]="theme">
                <svg width="20px" height="20px" viewBox="0 0 16 16" class="bi bi-view-list" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M3 4.5h10a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2zm0 1a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1H3zM1 2a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 2zm0 12a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 14z"/>
              </svg>
            </div>
            <div (click)="reload()" class="reset" tooltip="Reset Content" placement="bottom" [theme]="theme">
                <svg width="20px" height="20px" viewBox="0 0 16 16" class="bi bi-arrow-counterclockwise" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M12.83 6.706a5 5 0 0 0-7.103-3.16.5.5 0 1 1-.454-.892A6 6 0 1 1 2.545 5.5a.5.5 0 1 1 .91.417 5 5 0 1 0 9.375.789z"/>
                <path fill-rule="evenodd" d="M7.854.146a.5.5 0 0 0-.708 0l-2.5 2.5a.5.5 0 0 0 0 .708l2.5 2.5a.5.5 0 1 0 .708-.708L5.707 3 7.854.854a.5.5 0 0 0 0-.708z"/>
              </svg>
            </div>
        </div>


        <p *ngIf="existingCategory != undefined" >{{existingCategory ? 'Existing Category': 'New Category'}}</p>
        <div class="row row1 container" style="padding-top: 20px;">
            <button *ngIf="existingCategory == undefined" (click)="existingCategory = false"class="button">
                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-bookmark-plus" fill="white" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5V2zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1H4z"/>
                    <path fill-rule="evenodd" d="M8 4a.5.5 0 0 1 .5.5V6H10a.5.5 0 0 1 0 1H8.5v1.5a.5.5 0 0 1-1 0V7H6a.5.5 0 0 1 0-1h1.5V4.5A.5.5 0 0 1 8 4z"/>
                  </svg> New Category
            </button>

            <button *ngIf="existingCategory == undefined" (click)="existingCategory = true" class="button" style="margin-left:-40px">
                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-bookmark-check-fill" fill="white" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M4 0a2 2 0 0 0-2 2v13.5a.5.5 0 0 0 .74.439L8 13.069l5.26 2.87A.5.5 0 0 0 14 15.5V2a2 2 0 0 0-2-2H4zm6.854 5.854a.5.5 0 0 0-.708-.708L7.5 7.793 6.354 6.646a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0l3-3z"/>
                  </svg>
                Existing Category
            </button>

           <div *ngIf="existingCategory == false" class="row">
                <div class="col-md-4 mb-3">
                    <label for="month-of-death">New Main Category</label>                   
                    <input type="text" autocomplete="true" list="ContentTitle"  [(ngModel)]="categories.title" class="custom-select" id="month-of-death" required>                       
                </div>

                <div class="col-md-4 mb-3">
                    <label for="month-of-death"  style="display: flex;">Sub Category    
                    </label>
                    <input [(ngModel)]="categories.sub_categories[0].title" class="custom-select" id="month-of-death" required>                            
                </div>
           </div>

           <div class="row"  *ngIf="existingCategory == true">
                <div class="col-md-4 mb-3">
                    <label for="month-of-death">Existing Main Category</label>
                    <select (change)="parentIdHandler($event)"  *ngIf="!newMainCategory" class="form-control">
                        <option selected disabled>Choose..</option>
                        <option *ngFor="let content of titles" value="{{content.id}}">{{content.title}}</option>                       
                    </select>
                </div>

                <div class="col-md-4 mb-3">
                    <label for="month-of-death"  style="display: flex;">Sub Category    
                    </label>
                    <input [(ngModel)]="childParams.title" class="custom-select" id="month-of-death" required>                            
                </div>
           </div>

            
        </div>



        <div  *ngIf="existingCategory != undefined"  class="row row2 container">

            <button class="clickable" (click)="addItem('Sliders')"> Slider </button>

            <button class="clickable" (click)="addItem('Grids')"> Grids </button>

            <button class="clickable" (click)="addItem('Texts')"> Texts </button>

            <button class="clickable" (click)="addItem('Media')"> Media </button>

            <button class="clickable" (click)="addItem('Cards')"> Cards </button>

            <button class="clickable" (click)="addItem('Articles')"> Articles </button>

            <button class="clickable" (click)="addItem('Lists')"> Lists </button>
        </div>


        <div [@listAnimation]=[items.length]>
            <div *ngFor="let item of items; let i = index;">


                <div *ngIf="item.type == 'article'" class="row row4 Slider container Texts">
                    <h4 class="headings title ">Article
                        <span title="Position ">
                            <div class="drop-down-container" (click)="status11=!status11" [ngClass]="status11 ? 'clicked' : 'danger'">            
                                <i tooltip="Insert Item" placement="left" [theme]="theme" class="fas fa-puzzle-piece initiator"></i>
                                <div class="top-bot" >
                                Top
                                <div class="drop-down">
                                    <div (click)="insertItem('Sliders',i)">Slider</div>
                                    <div (click)="insertItem('Grids',i)">Grid</div>
                                    <div (click)="insertItem('Media',i)">Media</div>
                                    <div (click)="insertItem('Cards',i)">Card</div>
                                    <div (click)="insertItem('Texts',i)">Text</div>
                                    <div (click)="insertItem('Articles',i)">Articles</div>
                                    <div (click)="insertItem('Lists',i)">Lists</div>
                                </div>
                            </div>
                            <div class="top-bot">
                                Bottom
                                <div class="drop-down">
                                    <div (click)="insertItem('Sliders',i+1)">Slider</div>
                                    <div (click)="insertItem('Grids',i+1)">Grid</div>
                                    <div (click)="insertItem('Media',i+1)">Media</div>
                                    <div (click)="insertItem('Cards',i+1)">Card</div>
                                    <div (click)="insertItem('Texts',i+1)">Text</div>
                                    <div (click)="insertItem('Articles',i+1)">Articles</div>
                                    <div (click)="insertItem('Lists',i+1)">Lists</div>
                                </div>
                            </div>
                        </div>                        
                            <div   (click)="removeItem(i)"  tooltip="Remove this Grid container" placement="bottom" [theme]="theme">
                                <svg width="20px " height="20px " viewBox="0 0 16 16 " class="bi bi-dash-circle " fill="currentColor " xmlns="http://www.w3.org/2000/svg ">
                                    <path fill-rule="evenodd " d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z "/>
                                    <path fill-rule="evenodd " d="M3.5 8a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 0 1H4a.5.5 0 0 1-.5-.5z "/>
                                </svg>
                            </div>
                        </span>
                    </h4>
                    <div class="container article-container">
                        <div class="img-container">
                            <img alt="" style="min-height: 100%;" *ngIf="item.image.length !== ''" [src]="item.image">
                            <div (click)="triggerMediaInput('quicklink',i)" class="icon-container">
                                <i style="font-size: 25px;" class="fas fa-camera"></i>
                                <input (change)="readArticleUrl($event.target.files,$event, i)" accept="image/*" type="file" class="hidden" [id]="'quicklink' + i" style="display: none;">
                            </div>
                        </div>
                        <div class="inputs-container">
                            <h4 (input)="item.title=$event.target.innerText " contenteditable="">Your Article Title here..</h4>
                            <br>
                            <p (input)="item.description=$event.target.innerText " contenteditable="">Article description.....</p>
                        </div>
                    </div>
                </div>


                <div *ngIf="item.type == 'list'" class="row row4 Slider container Texts">
                    <h4 class="headings title ">List
                        <span title="Position ">
                            <div class="drop-down-container" (click)="status12=!status12" [ngClass]="status12 ? 'clicked' : 'danger'">            
                                <i tooltip="Insert Item" placement="left" [theme]="theme" class="fas fa-puzzle-piece initiator"></i>
                                <div class="top-bot" >
                                Top
                                <div class="drop-down">
                                    <div (click)="insertItem('Sliders',i)">Slider</div>
                                    <div (click)="insertItem('Grids',i)">Grid</div>
                                    <div (click)="insertItem('Media',i)">Media</div>
                                    <div (click)="insertItem('Cards',i)">Card</div>
                                    <div (click)="insertItem('Texts',i)">Text</div>
                                    <div (click)="insertItem('Articles',i)">Articles</div>
                                    <div (click)="insertItem('Lists',i)">Lists</div>
                                </div>
                            </div>
                            <div class="top-bot">
                                Bottom
                                <div class="drop-down">
                                    <div (click)="insertItem('Sliders',i+1)">Slider</div>
                                    <div (click)="insertItem('Grids',i+1)">Grid</div>
                                    <div (click)="insertItem('Media',i+1)">Media</div>
                                    <div (click)="insertItem('Cards',i+1)">Card</div>
                                    <div (click)="insertItem('Texts',i+1)">Text</div>
                                    <div (click)="insertItem('Articles',i+1)">Articles</div>
                                    <div (click)="insertItem('Lists',i+1)">Lists</div>
                                </div>
                            </div>
                        </div>     
                            <div (click)="addList(i)" tooltip="Add additional Grid" placement="bottom" [theme]="theme">
                                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-patch-plus-fll" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" d="M10.067.87a2.89 2.89 0 0 0-4.134 0l-.622.638-.89-.011a2.89 2.89 0 0 0-2.924 2.924l.01.89-.636.622a2.89 2.89 0 0 0 0 4.134l.637.622-.011.89a2.89 2.89 0 0 0 2.924 2.924l.89-.01.622.636a2.89 2.89 0 0 0 4.134 0l.622-.637.89.011a2.89 2.89 0 0 0 2.924-2.924l-.01-.89.636-.622a2.89 2.89 0 0 0 0-4.134l-.637-.622.011-.89a2.89 2.89 0 0 0-2.924-2.924l-.89.01-.622-.636zM8.5 6a.5.5 0 0 0-1 0v1.5H6a.5.5 0 0 0 0 1h1.5V10a.5.5 0 0 0 1 0V8.5H10a.5.5 0 0 0 0-1H8.5V6z"/>
                                </svg>
                            </div>                      
                            <div   (click)="removeItem(i)"  tooltip="Remove this Grid container" placement="bottom" [theme]="theme">
                                <svg width="20px " height="20px " viewBox="0 0 16 16 " class="bi bi-dash-circle " fill="currentColor " xmlns="http://www.w3.org/2000/svg ">
                                    <path fill-rule="evenodd " d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z "/>
                                    <path fill-rule="evenodd " d="M3.5 8a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 0 1H4a.5.5 0 0 1-.5-.5z "/>
                                </svg>
                            </div>
                        </span>
                    </h4>
                    <h4 (input)="item.title=$event.target.innerText " contenteditable="">Your Lists Title here..</h4>
                    <ul>
                        <li class="list-Items" *ngFor="let listitem of item.items;let j = index;">
                            <p (click)="clearList(i,j)">{{listitem.body}}</p>
                            <div class="list-input-container" *ngIf="listitem == ''">
                                <textarea (keyup.enter)="$event.preventDefault(); pushList(i,j)" [(ngModel)]="list" placeholder="Aa" autosize type="text" class="form-control"></textarea>

                            </div>
                        </li>
                    </ul>
                </div>


                <div *ngIf="item.type == 'slider'" class="row row3 Slider container ">
                    <h4 class="headings title ">Slider
                        <span>
                            <div class="drop-down-container" (click)="status=!status" [ngClass]="status ? 'clicked' : 'danger'">            
                                <i tooltip="Insert Item" placement="left" [theme]="theme" class="fas fa-puzzle-piece initiator"></i>
                                <div class="top-bot" >
                                Top
                                <div class="drop-down">
                                    <div (click)="insertItem('Sliders',i)">Slider</div>
                                    <div (click)="insertItem('Grids',i)">Grid</div>
                                    <div (click)="insertItem('Media',i)">Media</div>
                                    <div (click)="insertItem('Cards',i)">Card</div>
                                    <div (click)="insertItem('Texts',i)">Text</div>
                                    <div (click)="insertItem('Articles',i)">Articles</div>
                                    <div (click)="insertItem('Lists',i)">Lists</div>
                                </div>
                            </div>
                            <div class="top-bot">
                                Bottom
                                <div class="drop-down">
                                    <div (click)="insertItem('Sliders',i+1)">Slider</div>
                                    <div (click)="insertItem('Grids',i+1)">Grid</div>
                                    <div (click)="insertItem('Media',i+1)">Media</div>
                                    <div (click)="insertItem('Cards',i+1)">Card</div>
                                    <div (click)="insertItem('Texts',i+1)">Text</div>
                                    <div (click)="insertItem('Articles',i+1)">Articles</div>
                                    <div (click)="insertItem('Lists',i+1)">Lists</div>
                                </div>
                            </div>
                            </div>              
                            <div (click)="triggerMediaInput('Sliderimg',i)" tooltip="Add an image" placement="bottom" [theme]="theme" >
                                <svg width="20px " height="20px " viewBox="0 0 16 16 " class="bi bi-camera-fill " fill="currentColor " xmlns="http://www.w3.org/2000/svg ">
                                    <path d="M10.5 8.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z "/>
                                    <path fill-rule="evenodd " d="M2 4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-1.172a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 9.172 2H6.828a2 2 0 0 0-1.414.586l-.828.828A2 2 0 0 1 3.172 4H2zm.5 2a.5.5 0 1
                                    0 0-1 .5.5 0 0 0 0 1zm9 2.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0z "/>
                                </svg>
                            </div>
                            <div (click)="triggerMediaInput('Slidervideo',i)"  tooltip="Add a video" placement="bottom" [theme]="theme">
                                <svg width="20px " height="20px " viewBox="0 0 16 16 " class="bi bi-camera-video-fill " fill="currentColor " xmlns="http://www.w3.org/2000/svg ">
                                    <path d="M2.667 3h6.666C10.253 3 11 3.746 11 4.667v6.666c0 .92-.746 1.667-1.667 1.667H2.667C1.747 13 1 12.254 1 11.333V4.667C1 3.747 1.746 3 2.667 3z "/>
                                    <path d="M7.404 8.697l6.363 3.692c.54.313 1.233-.066 1.233-.697V4.308c0-.63-.693-1.01-1.233-.696L7.404 7.304a.802.802 0 0 0 0 1.393z "/>
                                </svg>
                            </div>          
                            <div  (click)="removeItem(i)"  tooltip="Remove this Slider container" placement="bottom" [theme]="theme" >
                                <svg width="20px " height="20px " viewBox="0 0 16 16 " class="bi bi-dash-circle " fill="currentColor " xmlns="http://www.w3.org/2000/svg ">
                                    <path fill-rule="evenodd " d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z "/>
                                    <path fill-rule="evenodd " d="M3.5 8a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 0 1H4a.5.5 0 0 1-.5-.5z "/>
                                </svg>
                            </div>
                        </span>
                    </h4>
                    <owl-carousel-o [options]="customOptions">
                        <ng-template carouselSlide *ngFor="let image of item.images">
                            <img alt="" title="slide.title " [style.background]="'url(' + image + ')'">
                        </ng-template>
                        <ng-template carouselSlide *ngFor="let video of item.videos ">
                            <video autoplay [src]="video " style="margin:0 !important;width:100% !important;height: 40vh !important;  object-fit: fill;    min-height: 40vh;"></video>
                        </ng-template>
                    </owl-carousel-o>
                    <br>
                    <input multiple (change)="readSliderURL( $event.target.files, $event, i, 'image' ) " type="file" accept="image/* " style="display:none " [id]="'Sliderimg' + i ">
                    <input multiple (change)="readSliderURL( $event.target.files, $event, i, 'video' ) " type="file" accept="video/* " style="display:none " [id]="'Slidervideo' + i ">
                </div>

                <div *ngIf="item.type == 'grid'" class="row row6 Grids container ">
                    <h4 class="headings title ">Grids
                        <span title="Position ">
                            <div class="drop-down-container" (click)="status=!status" [ngClass]="status ? 'clicked' : 'danger'">            
                                <i tooltip="Insert Item" placement="left" [theme]="theme" class="fas fa-puzzle-piece initiator"></i>
                                <div class="top-bot" >
                                Top
                                <div class="drop-down">
                                    <div (click)="insertItem('Sliders',i)">Slider</div>
                                    <div (click)="insertItem('Grids',i)">Grid</div>
                                    <div (click)="insertItem('Media',i)">Media</div>
                                    <div (click)="insertItem('Cards',i)">Card</div>
                                    <div (click)="insertItem('Texts',i)">Text</div>
                                    <div (click)="insertItem('Articles',i)">Articles</div>
                                    <div (click)="insertItem('Lists',i)">Lists</div>
                                </div>
                            </div>
                            <div class="top-bot">
                                Bottom
                                <div class="drop-down">
                                    <div (click)="insertItem('Sliders',i+1)">Slider</div>
                                    <div (click)="insertItem('Grids',i+1)">Grid</div>
                                    <div (click)="insertItem('Media',i+1)">Media</div>
                                    <div (click)="insertItem('Cards',i+1)">Card</div>
                                    <div (click)="insertItem('Texts',i+1)">Text</div>
                                    <div (click)="insertItem('Articles',i+1)">Articles</div>
                                    <div (click)="insertItem('Lists',i+1)">Lists</div>
                                </div>
                            </div>
                            </div>             
           
                            <div (click)="addGrid(i)" tooltip="Add additional Grid" placement="bottom" [theme]="theme">
                                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-patch-plus-fll" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" d="M10.067.87a2.89 2.89 0 0 0-4.134 0l-.622.638-.89-.011a2.89 2.89 0 0 0-2.924 2.924l.01.89-.636.622a2.89 2.89 0 0 0 0 4.134l.637.622-.011.89a2.89 2.89 0 0 0 2.924 2.924l.89-.01.622.636a2.89 2.89 0 0 0 4.134 0l.622-.637.89.011a2.89 2.89 0 0 0 2.924-2.924l-.01-.89.636-.622a2.89 2.89 0 0 0 0-4.134l-.637-.622.011-.89a2.89 2.89 0 0 0-2.924-2.924l-.89.01-.622-.636zM8.5 6a.5.5 0 0 0-1 0v1.5H6a.5.5 0 0 0 0 1h1.5V10a.5.5 0 0 0 1 0V8.5H10a.5.5 0 0 0 0-1H8.5V6z"/>
                                </svg>
                            </div>
                            <div  (click)="removeItem(i)"   tooltip="Remove this Grid" placement="bottom" [theme]="theme">
                                <svg width="20px " height="20px " viewBox="0 0 16 16 " class="bi bi-dash-circle " fill="currentColor " xmlns="http://www.w3.org/2000/svg ">
                                    <path fill-rule="evenodd " d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z "/>
                                    <path fill-rule="evenodd " d="M3.5 8a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 0 1H4a.5.5 0 0 1-.5-.5z "/>
                                </svg>
                            </div>
                        </span>
                    </h4><br>
                    <div class="inline">
                        <div *ngFor="let grid of item.items; let j=index; " class="card grid " style="width: 18rem; ">
                            <i *ngIf="grid.image=='' " (click)="triggerMediaInput( 'griditem',j) " class="fas fa-image "></i>
                            <i (click)="removeGrid(i,j)" class="fas fa-times-circle"></i>
                            <img (click)="triggerMediaInput( 'griditem',j) " [src]="grid.image " class="card-img-top " alt="">
                            <div class="card-body ">
                                <h5 (input)="grid.title = $event.target.innerText " class="card-title " contenteditable>Grid title</h5>
                            </div>
                            <input accept="image/* " type="file" (change)="readGridUrl($event.target.files,$event,i,j) " style="display: none; " [id]=" 'griditem' + j ">
                        </div>
                    </div>
                </div>

                <div *ngIf="item.type == 'text'" class="row row4 Texts container ">
                    <h4 class="headings title ">Texts
                        <span title="Position ">
                            <div class="drop-down-container" (click)="status=!status" [ngClass]="status ? 'clicked' : 'danger'">            
                                <i tooltip="Insert Item" placement="left" [theme]="theme" class="fas fa-puzzle-piece initiator"></i>
                                <div class="top-bot" >
                                Top
                                <div class="drop-down">
                                    <div (click)="insertItem('Sliders',i)">Slider</div>
                                    <div (click)="insertItem('Grids',i)">Grid</div>
                                    <div (click)="insertItem('Media',i)">Media</div>
                                    <div (click)="insertItem('Cards',i)">Card</div>
                                    <div (click)="insertItem('Texts',i)">Text</div>
                                    <div (click)="insertItem('Articles',i)">Articles</div>
                                    <div (click)="insertItem('Lists',i)">Lists</div>
                                </div>
                            </div>
                            <div class="top-bot">
                                Bottom
                                <div class="drop-down">
                                    <div (click)="insertItem('Sliders',i+1)">Slider</div>
                                    <div (click)="insertItem('Grids',i+1)">Grid</div>
                                    <div (click)="insertItem('Media',i+1)">Media</div>
                                    <div (click)="insertItem('Cards',i+1)">Card</div>
                                    <div (click)="insertItem('Texts',i+1)">Text</div>
                                    <div (click)="insertItem('Articles',i+1)">Articles</div>
                                    <div (click)="insertItem('Lists',i+1)">Lists</div>
                                </div>
                            </div>
                        </div>                        
                            <div (click)="removeItem(i)"  tooltip="Remove this Grid container" placement="bottom" [theme]="theme">
                                <svg width="20px " height="20px " viewBox="0 0 16 16 " class="bi bi-dash-circle " fill="currentColor " xmlns="http://www.w3.org/2000/svg ">
                                    <path fill-rule="evenodd " d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z "/>
                                    <path fill-rule="evenodd " d="M3.5 8a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 0 1H4a.5.5 0 0 1-.5-.5z "/>
                                </svg>
                            </div>
                        </span>
                    </h4><br>
                    <h4 (input)="item.title=$event.target.innerText " contenteditable>Title Here</h4>
                    <p (input)="item.body=$event.target.innerText " contenteditable>Paragraph here</p>
                </div>

                <div *ngIf="item.type == 'media'" class="row row5 Big-Image container ">
                    <h4 class="headings title ">Media
                        <span title="Position ">
                            <div class="drop-down-container" (click)="status3=!status3" [ngClass]="status3 ? 'clicked' : 'danger'">            
                                <i tooltip="Insert Item" placement="left" [theme]="theme" class="fas fa-puzzle-piece initiator"></i>
                                <div class="top-bot" >
                                Top
                                <div class="drop-down">
                                    <div (click)="insertItem('Sliders',i)">Slider</div>
                                    <div (click)="insertItem('Grids',i)">Grid</div>
                                    <div (click)="insertItem('Media',i)">Media</div>
                                    <div (click)="insertItem('Cards',i)">Card</div>
                                    <div (click)="insertItem('Texts',i)">Text</div>
                                    <div (click)="insertItem('Articles',i)">Articles</div>
                                    <div (click)="insertItem('Lists',i)">Lists</div>
                                </div>
                            </div>
                            <div class="top-bot">
                                Bottom
                                <div class="drop-down">
                                    <div (click)="insertItem('Sliders',i+1)">Slider</div>
                                    <div (click)="insertItem('Grids',i+1)">Grid</div>
                                    <div (click)="insertItem('Media',i+1)">Media</div>
                                    <div (click)="insertItem('Cards',i+1)">Card</div>
                                    <div (click)="insertItem('Texts',i+1)">Text</div>
                                    <div (click)="insertItem('Articles',i+1)">Articles</div>
                                    <div (click)="insertItem('Lists',i+1)">Lists</div>
                                </div>
                            </div>
                            </div>
               
                            <div (click)="triggerMediaInput('mediaimg',i) "  tooltip="Add an Image" placement="bottom" [theme]="theme">
                                <svg width="20px " height="20px " viewBox="0 0 16 16 " class="bi bi-camera-fill " fill="currentColor " xmlns="http://www.w3.org/2000/svg ">
                                    <path d="M10.5 8.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z "/>
                                    <path fill-rule="evenodd " d="M2 4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-1.172a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 9.172 2H6.828a2 2 0 0 0-1.414.586l-.828.828A2 2 0 0 1 3.172 4H2zm.5 2a.5.5
                                0 1 0 0-1 .5.5 0 0 0 0 1zm9 2.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0z "/>
                                </svg>
                            </div>
                            <div  (click)="triggerMediaInput('mediavideo',i) " tooltip="Add a video" placement="bottom" [theme]="theme">
                                <svg width="20px " height="20px " viewBox="0 0 16 16 " class="bi bi-camera-video-fill " fill="currentColor " xmlns="http://www.w3.org/2000/svg ">
                                    <path d="M2.667 3h6.666C10.253 3 11 3.746 11 4.667v6.666c0 .92-.746 1.667-1.667 1.667H2.667C1.747 13 1 12.254 1 11.333V4.667C1 3.747 1.746 3 2.667 3z "/>
                                    <path d="M7.404 8.697l6.363 3.692c.54.313 1.233-.066 1.233-.697V4.308c0-.63-.693-1.01-1.233-.696L7.404 7.304a.802.802 0 0 0 0 1.393z "/>
                                </svg>
                            </div>
                            <div  (click)="triggerMediaInput('mediapdf',i) " tooltip="Add a PDF file" placement="bottom" [theme]="theme">
                                <svg width="20px " height="20px " viewBox="0 0 16 16 " class="bi bi-file-earmark-medical " fill="currentColor " xmlns="http://www.w3.org/2000/svg ">
                                    <path d="M4 1h5v1H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V6h1v7a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2z "/>
                                    <path d="M9 4.5V1l5 5h-3.5A1.5 1.5 0 0 1 9 4.5z "/>
                                    <path fill-rule="evenodd " d="M7 4a.5.5 0 0 1 .5.5v.634l.549-.317a.5.5 0 1 1 .5.866L8 6l.549.317a.5.5 0 1 1-.5.866L7.5 6.866V7.5a.5.5 0 0 1-1 0v-.634l-.549.317a.5.5 0 1 1-.5-.866L6 6l-.549-.317a.5.5 0 0 1 .5-.866l.549.317V4.5A.5.5
                                0 0 1 7 4zM5 9.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5z "/>
                                </svg>
                            </div>
                            <div   (click)="removeItem(i)"   tooltip="Remove this Media" placement="bottom" [theme]="theme">
                                <svg width="20px " height="20px " viewBox="0 0 16 16 " class="bi bi-dash-circle " fill="currentColor " xmlns="http://www.w3.org/2000/svg ">
                                    <path fill-rule="evenodd " d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z "/>
                                    <path fill-rule="evenodd " d="M3.5 8a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 0 1H4a.5.5 0 0 1-.5-.5z "/>
                                </svg>
                            </div>
                        </span>
                        <input (change)="readURL($event.target.files,$event,i, 'pdf') " type="file" accept="application/pdf " style="display:none " [id]="'mediapdf' + i ">
                        <input (change)="readURL($event.target.files,$event,i, 'image') " type="file" accept="image/* " style="display:none " [id]="'mediaimg' + i ">
                        <input (change)="readURL($event.target.files,$event,i, 'video') " type="file" accept="video/* " style="display:none " [id]="'mediavideo' + i ">
                    </h4>
                    <video controls [src]="item.video " *ngIf="item.video !='' "></video>
                    <img [src]="item.image " *ngIf="item.image !='' " alt="">
                    <object [data]="cleanURL(item.pdf) " *ngIf="item.pdf !='' "></object>
                </div>

                <div *ngIf="item.type == 'card' " class="row row7 Cards container ">
                    <h4 class="headings title ">Cards
                        <span title="Position ">
                            <div class="drop-down-container" (click)="status4=!status4" [ngClass]="status4 ? 'clicked' : 'danger'">            
                                <i tooltip="Insert Item" placement="left" [theme]="theme" class="fas fa-puzzle-piece initiator"></i>
                                <div class="top-bot" >
                                Top
                                <div class="drop-down">
                                    <div (click)="insertItem('Sliders',i)">Slider</div>
                                    <div (click)="insertItem('Grids',i)">Grid</div>
                                    <div (click)="insertItem('Media',i)">Media</div>
                                    <div (click)="insertItem('Cards',i)">Card</div>
                                    <div (click)="insertItem('Texts',i)">Text</div>
                                    <div (click)="insertItem('Articles',i)">Articles</div>
                                    <div (click)="insertItem('Lists',i)">Lists</div>
                                </div>
                            </div>
                            <div class="top-bot">
                                Bottom
                                <div class="drop-down">
                                    <div (click)="insertItem('Sliders',i+1)">Slider</div>
                                    <div (click)="insertItem('Grids',i+1)">Grid</div>
                                    <div (click)="insertItem('Media',i+1)">Media</div>
                                    <div (click)="insertItem('Cards',i+1)">Card</div>
                                    <div (click)="insertItem('Texts',i+1)">Text</div>
                                    <div (click)="insertItem('Articles',i+1)">Articles</div>
                                    <div (click)="insertItem('Lists',i+1)">Lists</div>
                                </div>
                            </div>
                        </div>             
                        <div (click)="addCard(i) "  tooltip="Add additional card" placement="bottom" [theme]="theme">
                                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-patch-plus-fll" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" d="M10.067.87a2.89 2.89 0 0 0-4.134 0l-.622.638-.89-.011a2.89 2.89 0 0 0-2.924 2.924l.01.89-.636.622a2.89 2.89 0 0 0 0 4.134l.637.622-.011.89a2.89 2.89 0 0 0 2.924 2.924l.89-.01.622.636a2.89 2.89 0 0 0 4.134 0l.622-.637.89.011a2.89 2.89 0 0 0 2.924-2.924l-.01-.89.636-.622a2.89 2.89 0 0 0 0-4.134l-.637-.622.011-.89a2.89 2.89 0 0 0-2.924-2.924l-.89.01-.622-.636zM8.5 6a.5.5 0 0 0-1 0v1.5H6a.5.5 0 0 0 0 1h1.5V10a.5.5 0 0 0 1 0V8.5H10a.5.5 0 0 0 0-1H8.5V6z"/>
                                </svg>
                            </div>
                            <div  (click)="removeItem(i)"  tooltip="Remove this Cards container" placement="bottom" [theme]="theme">
                                <svg width="20px " height="20px " viewBox="0 0 16 16 " class="bi bi-dash-circle " fill="currentColor " xmlns="http://www.w3.org/2000/svg ">
                                    <path fill-rule="evenodd " d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z "/>
                                    <path fill-rule="evenodd " d="M3.5 8a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 0 1H4a.5.5 0 0 1-.5-.5z "/>
                                </svg>
                            </div>
                        </span>
                    </h4><br>
                    <div class="inline">
                        <div class="card " *ngFor="let card of item.items; let j=index; ">

                            <i (click)="removeCard(i,j)" class=" fas fa-times-circle "></i>
                            <img (click)="triggerMediaInput('carditem', j) " [src]="card.image " class="card-img-top " alt="">
                            <div class="card-body ">
                                <h5 class="card-title " contenteditable (input)="card.title=$event.target.innerText ">Card title</h5>
                                <p contenteditable (input)="card.body=$event.target.innerText ">Card body here.. </p>
                                <input accept="image/* " type="file" (change)="readCardURL($event.target.files,$event,i,j) " style="display: none; " [id]="'carditem' + j">
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>




        <div class="button-container "  *ngIf="existingCategory != undefined" >
            <button (click)="previewData() " class="button clickable " style="margin-right: 0px ">
                Preview
            </button>
            <button (click)="submit() " class="button " style="margin-left: 20px; ">
                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-check2" fill="white" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"/>
                  </svg>
                  Im okay with this
            </button>
        </div>
    </div>

    <br> <br><br> <br><br> <br>

</div>