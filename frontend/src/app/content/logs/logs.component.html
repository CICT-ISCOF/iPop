<div *ngIf="isLoading" class="loader"></div>
<br>
<div class="search-container">
    <input type="text" class="form-control w-50" placeholder="Global Search">
    <button tooltip="Filter Column" placement="left" [theme]="theme">
        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-filter" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" d="M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"/>
        </svg>
    </button>

    <button tooltip="Download data in .xls format" placement="bottom" [theme]="theme" show-delay="50" class="button">
        <i  class="fas fa-file-excel"></i>
    </button>

    <button tooltip="Print data" placement="bottom" [theme]="theme">
        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-printer" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path d="M11 2H5a1 1 0 0 0-1 1v2H3V3a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2h-1V3a1 1 0 0 0-1-1zm3 4H2a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h1v1H2a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2h-1v-1h1a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1z"/>
            <path fill-rule="evenodd" d="M11 9H5a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1zM5 8a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H5z"/>
            <path d="M3 7.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0z"/>
          </svg>
    </button>

</div><br>
<div class="logscomponent container">
    <ag-table #table paginate="100" height="900px" min-width="800px">
        <ag-table-header>
            <ag-table-col filter="tet" field="profType" width="250px">
                Admin
            </ag-table-col>
            <ag-table-col filter="select" field="profType">
                <span> Role</span>
            </ag-table-col>
            <ag-table-col filter="text" field="profType">
                <span>  IP Address </span>
            </ag-table-col>
            <ag-table-col filter="text" field="profType">
                <span> Browser</span>
            </ag-table-col>
            <ag-table-col filter="text" field="profType" width="200px">
                <span> Operation</span>
            </ag-table-col>
            <ag-table-col filter="date" field="profType">
                <span>  Recorded Last</span>
            </ag-table-col>
        </ag-table-header>
        <ag-table-body row-height="70px">
            <ag-table-row *ngFor="let log of logs ">
                <ag-table-cell class="fullname">
                    <img src="../../../assets/wallpapers/1.jpg" alt=""> {{ log.user == null || log.user == undefined ? 'Uknown user' : log.user.fullname}} <br>
                </ag-table-cell>
                <ag-table-cell> <span class="badge badge-success"> {{ log.user == null || log.user == undefined ? 'Visitor' : log.user.role}} </span> </ag-table-cell>
                <ag-table-cell>{{ log.ip_address }} </ag-table-cell>

                <ag-table-cell>
                    <span *ngIf="checkifMobile(formatUserAgent(log.user_agent))" style="margin-right: -5px;">
                        <i style="color:coral" class="fas fa-desktop"></i>
                    </span>
                    <span *ngIf="!checkifMobile(formatUserAgent(log.user_agent))">
                        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-phone" fill="orange" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" d="M11 1H5a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM5 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H5z"/>
                            <path fill-rule="evenodd" d="M8 14a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                          </svg>
                    </span> {{ formatUserAgent(log.user_agent) }}
                </ag-table-cell>

                <ag-table-cell tooltip="{{ log.action }}" placement="left" [theme]="theme" show-delay="50" style="word-break: break-all;">{{ log.action }} </ag-table-cell>
                <ag-table-cell>
                    {{ log.created_at | date : 'EEEE, MMMM dd, yyyy' }} <br>
                    <span style="color:gray">{{ log.created_at | date : 'h:mm a' }}</span>
                </ag-table-cell>
            </ag-table-row>
        </ag-table-body>
    </ag-table>

</div>


<nav aria-label="... ">
    <ul class="pagination ">
        <li class="page-item " [class.disabled]="pagination.currentPage == 1">
            <a class="page-link " (click)="paginate( pagination.currentPage - 1 ) " tabindex="-1 " aria-disabled="true " style="color:gray !important ">Previous</a>
        </li>

        <li (click)="paginate(page) " *ngFor="let page of pagination.totalPages " class="page-item " [class.active]='pagination.currentPage == page'>
            <a *ngIf="page !=0 " style="color:gray " class="page-link ">{{ page }}</a>
        </li>


        <li class="page-item " [class.disabled]="pagination.currentPage==pagination.lastPage ">
            <a class="page-link " (click)="paginate( pagination.currentPage + 1 ) " tabindex="-1 " aria-disabled="true " style="color:gray !important ">Next</a>
        </li>
    </ul>
</nav>