<div *ngIf="isLoading" class="loader"></div>
<div *ngIf="!ViewData" class="comment-container">
    <div class="row">
        <div class="col-md-3 ">
            <div class="comment-box">
                <p>Write a Comment
                    <span (click)="ViewData = true" tooltip="View Data Encoded by Jamel Eid Yassin" placement="right" show-delay="100" [theme]="theme">
                        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-journals" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            <path d="M3 2h8a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2h1a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1H1a2 2 0 0 1 2-2z"/>
                            <path d="M5 0h8a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2v-1a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H5a1 1 0 0 0-1 1H3a2 2 0 0 1 2-2zM1 6v-.5a.5.5 0 0 1 1 0V6h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0V9h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1z"/>
                          </svg>
                    </span>
                </p>
                <textarea #textarea [(ngModel)]="message" placeholder="Aa" class="form-control" name="" id="" cols="30" rows="10"></textarea>

                <button (click)="addComment()" class="button send">Add Comment</button>
            </div>
        </div>

        <div class="col-md-8 comments">
            <br><br>
            <p style="text-align: center;" *ngIf="comments.length == 0">No comments yet....</p>
            <div class="comment container" *ngFor="let comment of comments">
                <div class="img-container">
                    <img src="../../../../../assets/wallpapers/1.jpg" alt="">
                </div>
                <div class="text">
                    <div class="name">
                        <span>@{{ formatName(comment.user.fullname) }}</span>{{ comment.body }}
                    </div>
                    <div class="time">
                        {{ comment.created_at | date: 'EEEE, h:mm a' }}
                    </div>
                </div>
                <div class="action-buttons">
                    <button (click)="reply()" class="clickable mr-auto" style="color:gray">Reply</button>
                    <button (click)="removeComment(comment.id)" class="clickable mr-auto" style="color:gray">Remove</button>
                    <i tooltip="Mark as noted" placement="right" show-delay="100" [theme]="theme" style="color:gray" class="fas fa-bell clickable"></i>
                    <i tooltip="noted" placement="right" show-delay="100" [theme]="theme" style="color:#4285F4" class="fas fa-bell clickable"></i>
                </div>
            </div>

        </div>

    </div>
</div>

<div *ngIf="ViewData" class="view-data">
    <i (click)="ViewData = false" class="fa fa-chevron-left"></i>

    <div class="container cpdb-component" id="cpdb-component" *ngIf="field != null">

        <br>
        <div class="inputs">

            <div class="row">
                <div class="col-md-4 mb-3">
                    <label for="sorting-number">Sorting Number</label>
                    <input type="number" [(ngModel)]="field.sorting_number" class="form-control" id="sorting-number">
                </div>
            </div>

            <hr>

            <h5>Location</h5>
            <div class="row">
                <div class="col-md-4 mb-3">
                    <label for="municipality">Municipality</label>
                    <input [(ngModel)]="field.municipality" class="custom-select" id="municipality">
                </div>

                <div class="col-md-4 mb-3">
                    <label for="barangay">Barangay</label>
                    <input class="custom-select" id="barangay" [(ngModel)]="field.barangay">
                </div>

                <div class="col-md-4 mb-3">
                    <label for="zone">Purok or Zone</label>
                    <input [(ngModel)]="field.zone" class="custom-select" id="zone">
                </div>
            </div>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="Householdnum">Household Number</label>
                    <input [(ngModel)]="field.household_number" class="custom-select" id="Householdnum">
                </div>

                <div class="col-md-6 mb-3">
                    <label for="Characterisitcs">Household Characterisitcs</label>
                    <input [(ngModel)]="field.household_characteristics" class="custom-select" id="Characterisitcs">
                </div>
            </div>

            <hr>
            <h5>Household</h5>
            <div class="row">
                <div class="col-md-4 mb-3">
                    <label for="number_of_persons_living">NO. of Persons Living in the House</label>
                    <input [(ngModel)]="field.number_of_persons_living" class="custom-select" id="number_of_persons_living" type="number">
                </div>

                <div class="col-md-4 mb-3">
                    <label for="houseHoldSizeBracket">Household Size Bracket</label>
                    <input list="list-household_size_bracket" [(ngModel)]="field.household_size_bracket" class="custom-select" id="houseHoldSizeBracket">

                    <datalist id="list-household_size_bracket">
                        <option *ngFor="let houseHoldSizeBracket of select.houseHoldSizeBrackets">{{ houseHoldSizeBracket }}</option>
                    </datalist>
                </div>


                <div class="col-md-4 mb-3">
                    <label for="number_of_families">Number of Families</label>
                    <input list="list-number_of_families" [(ngModel)]="field.number_of_families" class="custom-select" id="numofFamilies" type="number">

                    <datalist id="list-number_of_families">
                        <option  *ngFor="let houseHoldSizeBrackets of select.houseHoldSizeBrackets">{{houseHoldSizeBrackets}}</option>  
                    </datalist>

                </div>
            </div>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="lineNumber">Line number of Household Member</label>
                    <input [(ngModel)]="field.line_number_of_household_member" class="custom-select" id="lineNumber" type="text">
                </div>

                <div class="col-md-6 mb-3">
                    <label for="name_of_household_member">Name of Household Members</label>
                    <input [(ngModel)]="field.name_of_household_member" class="custom-select" id="name_of_household_member" type="text">
                </div>

                <div class="col-md-6 mb-3">
                    <label for="relationship_to_household_head">Relationship to Household Head</label>
                    <input list="list-relationship_to_household_head" [(ngModel)]="field.relationship_to_household_head" class="custom-select" id="relationship_to_household_head">

                    <datalist id="list-relationship_to_household_head">
                        <option *ngFor="let RelationshiptoHouseholdHead of select.RelationshiptoHouseholdHeads">{{ RelationshiptoHouseholdHead }}</option>
                    </datalist>
                </div>
            </div>

            <hr>
            <h5>Household Details</h5>
            <div class="row">
                <div class="col-md-4 mb-3">
                    <label for="sex">Sex</label>
                    <input list='list-sex' [(ngModel)]="field.sex" class="custom-select" id="sex">
                    <datalist id="list-sex">
                        <option *ngFor="let Sex of select.Sexes">{{ Sex }}</option>
                    </datalist>
                </div>

                <div class="col-md-4 mb-3">
                    <label for="date_of_birth">Date of Birth</label>
                    <input [(ngModel)]="field.date_of_birth" class="custom-select" id="dateOfBirth" type="date">
                </div>

                <div class="col-md-4 mb-3">
                    <label for="ageAsLastBirthDay">Age as of Last Birthday</label>
                    <input [(ngModel)]="field.age" class="custom-select" id="ageAsLastBirthDay" type="number">
                </div>
            </div>
            <div class="row">
                <div class="col-md-3 mb-3">
                    <label for="AgeBracket">Age Bracket</label>
                    <input list="list-age_bracket" [(ngModel)]="field.age_bracket" class="custom-select" id="AgeBracket">
                    <datalist id="list-age_bracket">
                        <option *ngFor="let AgeBrackets of select.AgeBrackets">{{ AgeBrackets }}</option>
                    </datalist>
                </div>

                <div class="col-md-4 mb-3">
                    <label for="civilStatus">Civil Status</label>
                    <input list="list-civil_status" [(ngModel)]="field.civil_status" class="custom-select" id="civilStatus">
                    <datalist id="list-civil_status">
                        <option *ngFor="let CivilStatuses of select.CivilStatuses">{{ CivilStatuses }}</option>
                    </datalist>
                </div>

                <div class="col-md-5 mb-3">
                    <label for="highest_educational_attainment">Highest Educational Attainment</label>
                    <input list="list-highest_educational_attainment" [(ngModel)]="field.highest_educational_attainment" class="custom-select" id="highest_educational_attainment">
                    <datalist id="list-highest_educational_attainment">
                        <option *ngFor="let HighestEducationalAttainments of select.HighestEducationalAttainments">{{ HighestEducationalAttainments }}</option>
                    </datalist>
                </div>
            </div>

            <hr>
            <h5>School</h5>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="school_attendance">School Attendance</label>
                    <input list="list-school_attendance" [(ngModel)]="field.school_attendance" class="custom-select" id="school_attendance">
                    <datalist id="list-school_attendance">
                        <option *ngFor="let SchoolAttendances of select.SchoolAttendances">{{ SchoolAttendances }}</option>
                    </datalist>
                </div>

                <div class="col-md-6 mb-6">
                    <label for="level_of_school_attendance">Grade/Year Level of School Attendance</label>
                    <input list="list-level_of_school_attendance" [(ngModel)]="field.level_of_school_attendance" class="custom-select" id="level_of_school_attendance">
                    <datalist id="list-level_of_school_attendance">
                        <option *ngFor="let GradeYearLevelofSchoolAttendances of select.GradeYearLevelofSchoolAttendances">{{ GradeYearLevelofSchoolAttendances }}</option>
                    </datalist>
                </div>
            </div>
            <div class="row">

                <div class="col-md-6 mb-3">
                    <label for="reason_for_not_attending_school">Reasons for Not Attending School</label>
                    <input list="list-reason_for_not_attending_school" placeholder="Enter specific Reason" [(ngModel)]="field.reason_for_not_attending_school" class="custom-select" id="reason_for_not_attending_school" type="text">
                </div>
                <datalist id="list-reason_for_not_attending_school">
                    <option *ngFor="let GradeYearLevelofSchoolAttendances of select.GradeYearLevelofSchoolAttendances">{{ GradeYearLevelofSchoolAttendances }}</option>
                </datalist>
            </div>

            <hr>
            <h5>Religion</h5>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="religious_affiliation">Religious Affiliation</label>
                    <input list="list-religious_affiliation" placeholder="Enter religion" [(ngModel)]="field.religious_affiliation" class="custom-select" id="religious_affiliation" type="text">
                </div>
                <datalist id="list-religious_affiliation">
                    <option *ngFor="let GradeYearLevelofSchoolAttendances of select.GradeYearLevelofSchoolAttendances">{{ GradeYearLevelofSchoolAttendances }}</option>
                </datalist>
            </div>

            <hr>
            <h5>Skills</h5>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="have_special_skills">Have special skills</label>
                    <input [(ngModel)]="field.have_special_skills" class="custom-select" id="have_special_skills" type="text">
                </div>

                <div * class="col-md-6 mb-3">
                    <label for="skills_specify">Type of Special Skill</label>
                    <input list="list-skills_specify" placeholder="Enter special skill" [(ngModel)]="field.skills_specify" class="custom-select" id="skills_specify">
                    <datalist id="list-skills_specify">
                        <option *ngFor="let TypeofSpecialSkills of select.TypeofSpecialSkills">{{ TypeofSpecialSkills }}</option>
                    </datalist>
                </div>


            </div>

            <hr>
            <h5>Disability</h5>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="presence_of_disability">Presence of Disability</label>
                    <input [(ngModel)]="field.presence_of_disability" class="custom-select" id="presence_of_disability">
                </div>

                <div class="col-md-6 mb-3">
                    <label for="type_of_disability">Type of Disability</label>
                    <input list="list-type_of_disability" [(ngModel)]="field.type_of_disability" class="custom-select" id="type_of_disability">
                    <datalist id="list-type_of_disability">
                        <option *ngFor="let TypeofDisabilities of select.TypeofDisabilities">{{ TypeofDisabilities }}</option>
                    </datalist>
                </div>
            </div>

            <hr>
            <h5>Tribe</h5>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="indigenous_group_or_tribe">Indigenous group or tribe</label>
                    <input list="list-type_of_disability" [(ngModel)]="field.indigenous_group_or_tribe" class="custom-select" id="indigenous_group_or_tribe">
                    <datalist id="list-type_of_disability">
                        <option>Yes</option>
                        <option>No</option>
                    </datalist>
                </div>

                <div class="col-md-6 mb-3">
                    <label for="name_of_group_or_tribe">Name of Indigenous or Tribe</label>
                    <input list="ist-name_of_group_or_tribe" (change)="changeHandler($event)" [(ngModel)]="field.name_of_group_or_tribe" class="custom-select" id="name_of_group_or_tribe">
                    <datalist id="list-name_of_group_or_tribe">
                        <option *ngFor="let NameofIndigenousorTribes of select.NameofIndigenousorTribes">{{ NameofIndigenousorTribes }}</option>
                    </datalist>
                </div>
            </div>

            <hr>
            <h5>PhilHealth</h5>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="active_philhealth_member">Active PhilHealth Member (18 years old & above)</label>
                    <input [(ngModel)]="field.active_philhealth_member" class="custom-select" id="active_philhealth_member">
                </div>

                <div class="col-md-6 mb-3">
                    <label for="philhealth_membership_specify">PhilHealth Membership-Specify</label>
                    <input [(ngModel)]="field.philhealth_membership_specify" class="custom-select" id="philhealth_membership_specify">
                </div>
            </div>

            <hr>
            <h5>Occupation</h5>
            <div class="row">
                <div class="col-md-4 mb-3">
                    <label for="usual_occupation_of_working_household_member">Usual Occupation of Working HH Member</label>
                    <input (change)="changeHandler($event)" [(ngModel)]="field.usual_occupation_of_working_household_member" class="custom-select" id="usual_occupation_of_working_household_member">
                </div>

                <div class="col-md-4 mb-3">
                    <label for="gross_monthly_income">Gross Monthly Income</label>
                    <input type="number" [(ngModel)]="field.gross_monthly_income" class="custom-select" id="gross_monthly_income">
                </div>

                <div class="col-md-4 mb-3">
                    <label for="income_bracket">Income Bracket</label>
                    <input class="custom-select" type="text" [(ngModel)]="field.income_bracket" id="income_bracket">
                </div>
            </div>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="place_of_work">Place of Work/Employment  of the Earning HouseHold Member</label>
                    <input [(ngModel)]="field.place_of_work" class="custom-select" id="place_of_work">
                </div>
            </div>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="number_of_years_stay">No. of Years Stay (in Current Address)</label>
                    <input [(ngModel)]="field.number_of_years_stay" type="number" class="custom-select" id="number_of_years_stay">
                </div>

                <div class="col-md-6 mb-3">
                    <label for="number_of_years_bracket">No. of Years Stay Bracket</label>
                    <input [(ngModel)]="field.number_of_years_bracket" class="custom-select" id="number_of_years_bracket">
                </div>
            </div>

            <hr>
            <h5>Stay</h5>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="fp_currently_used">FP Currently Used (By Women 10-50 yrs old)</label>
                    <input [(ngModel)]="field.fp_currently_used" class="custom-select" id="fp_currently_used">
                </div>
            </div>

            <hr>
            <h5>Income</h5>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="total_household_monthly_income">Total Household Monthly Income</label>
                    <input [(ngModel)]="field.total_household_monthly_income" type="number" class="custom-select" id="total_household_monthly_income">
                </div>

                <div class="col-md-6 mb-3">
                    <label for="household_income_bracket">Household Income Bracket</label>
                    <input [(ngModel)]="field.household_income_bracket" class="custom-select" id="household_income_bracket">
                </div>
            </div>

            <hr>
            <h5>House</h5>
            <div class="row">

                <div class="col-md-3 mb-3">
                    <label for="house_ownership">House Ownership</label>
                    <input [(ngModel)]="field.house_ownership" class="custom-select" id="house_ownership">
                </div>

                <div class="col-md-3 mb-3">
                    <label for="house_levels">How many stories/level is the house?</label>
                    <input [(ngModel)]="field.house_levels" class="custom-select" id="house_levels">
                </div>


                <div class="col-md-6 mb-3">
                    <label for="house_construction_material">House Construction Material</label>
                    <input [(ngModel)]="field.house_construction_material" class="custom-select" id="house_construction_material">
                </div>

                <div class="col-md-3 mb-3">
                    <label for="homelot_ownership_or_tenure_status">Homelot Ownership/Tenure Status</label>
                    <input [(ngModel)]="field.homelot_ownership_or_tenure_status" class="custom-select" id="homelot_ownership_or_tenure_status">
                </div>
            </div>

            <hr>
            <h5>Household Management</h5>
            <div class="row">

                <div class="col-md-4 mb-3">
                    <label for="source_of_drinking_water">HouseHold Usual Source of Water for Drinking</label>
                    <input (change)="changeHandler($event)" [(ngModel)]="field.source_of_drinking_water" class="custom-select" id="source_of_drinking_water">

                </div>

                <div class="col-md-5 mb-3">
                    <label for="type_of_toilet">Type of Toilet the Household Owns</label>
                    <input [(ngModel)]="field.type_of_toilet" class="custom-select" id="type_of_toilet">
                </div>

                <div class="col-md-3 mb-3">
                    <label for="garbage_disposal">Household's Garbage Disposal</label>
                    <input [(ngModel)]="field.garbage_disposal" class="custom-select" id="garbage_disposal">
                </div>
            </div>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="type_of_lighting_fuel">Type of Fuel Use for Lighting</label>
                    <input (change)="changeHandler($event)" [(ngModel)]="field.type_of_lighting_fuel" class="custom-select" id="type_of_lighting_fuel">
                </div>

                <div class="col-md-6 mb-3">
                    <label for="type_of_cooking_fuel">Type of Fuel for Cooking</label>
                    <input (change)="changeHandler($event)" [(ngModel)]="field.type_of_cooking_fuel" class="custom-select" id="type_of_cooking_fuel">
                </div>
            </div>


            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="geohazard_area">House Location Geo-Hazard Area</label>
                    <input [(ngModel)]="field.geohazard_area" class="custom-select" id="geohazard_area">
                </div>

                <div class="col-md-6 mb-3">
                    <label for="household_location">Household Location</label>
                    <input (change)="changeHandler($event)" [(ngModel)]="field.household_location" class="custom-select" id="household_location">
                </div>
            </div>

            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="flood_prone_area_water_level">Water Level in flood prone area</label>
                    <input [(ngModel)]="field.flood_prone_area_water_level" class="custom-select" id="flood_prone_area_water_level">
                </div>
            </div>

            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="access_to_infotech">Access to Information Technology</label>
                    <input (change)="changeHandler($event)" [(ngModel)]="field.access_to_infotech" class="custom-select" id="access_to_infotech">
                </div>

                <div class="col-md-6 mb-3">
                    <label for="forps_beneficiary_household">4Ps Beneficiary Household</label>
                    <input [(ngModel)]="forps_beneficiary_household" class="custom-select" id="forps_beneficiary_household">
                </div>
            </div>

            <br><br> <br><br>

            <div class="button-container">
                <button (click)="updateRecord()" class="button">Update this record</button>
            </div>

            <br><br> <br><br>


        </div>
        <div *ngIf="isLoading" class="loader"></div>

    </div>
</div>