<div class="statistics-component">
    <div class="row">
        <div class="col-md-6"></div>
        <div class="col-md-5">
            <button (click)="addData = true" *ngIf="!addData" class="button rounded"><i class="fa fa-plus"></i></button>
            <button (click)="addData = false" *ngIf="addData" class="button rounded"><i class="fa fa-times"></i></button>
        </div>
    </div>

    <div class="row">

        <div *ngIf="addData" class="front col-md-8">
            <div class="container row">

                <h2 class="pop2 col-md-12" style="text-transform: uppercase;">Add a Population Profile</h2>


                <div class="form-group col-md-4 mt-5">
                    <label for="municipality">
                    <div *ngIf="municipalityIsLoading" class="spinner-border text-light  spinner-border-sm fast" role="status">
                        <span class="sr-only">Loading...</span>
                    </div>
                    Municipality</label>
                    <select (change)="getBarangays($event)" class="form-control" id="municipality">
                        <option selected disabled>Choose Municipality</option>
                        <option *ngFor="let municipality of municipalities" [value]="municipality.code">{{municipality.name}}</option>
                    </select>
                </div>

                <div class="form-group col-md-4 mt-5">
                    <label for="barangay">
                    <div *ngIf="barangayIsLoading" class="spinner-border text-light  spinner-border-sm fast" role="status">
                        <span class="sr-only">Loading...</span>
                    </div>
                    Barangay</label>
                    <select (change)="setBarangay($event)" class="form-control" id="barangay">
                        <option selected disabled>Choose Barangay</option>
                        <option *ngFor="let barangay of barangays">{{barangay.name}}</option>
                    </select>
                </div>
                <hr>
                <div class="form-group col-md-4 mt-5">
                    <label for="year">Year</label>
                    <select [(ngModel)]="data.year" class="form-control " id="year">
                        <option selected disabled>Choose Year</option>
                        <option *ngFor="let year of years">{{year}}</option>
                    </select>
                </div>
                <div class="col-md-4 mb-3">
                    <label for="municipality">Coverage</label>
                    <input [(ngModel)]="data.coverage" type="text" class="form-control" id="municipality" required>
                    <div class="invalid-feedback">
                        Coverage is required
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <label for="municipality">Number of Barangays</label>
                    <input [(ngModel)]="data.barangays" type="text" class="form-control" id="municipality" required>
                    <div class="invalid-feedback">
                        Number of Barangays is required
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <label for="municipality">Land Area</label>
                    <input [(ngModel)]="data.land_area" type="text" class="form-control" id="municipality" required>
                    <div class="invalid-feedback">
                        Land Area is required
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <label for="municipality">Household Population</label>
                    <input [(ngModel)]="data.household_population" type="text" class="form-control" id="municipality" required>
                    <div class="invalid-feedback">
                        Household Population is required
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <label for="municipality">Males</label>
                    <input [(ngModel)]="data.males" type="text" class="form-control" id="municipality" required>
                    <div class="invalid-feedback">
                        Males is required
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <label for="municipality">Females</label>
                    <input [(ngModel)]="data.females" type="text" class="form-control" id="municipality" required>
                    <div class="invalid-feedback">
                        Females is required
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <label for="municipality">Sex Ratio</label>
                    <input [(ngModel)]="data.sex_ratio" type="text" class="form-control" id="municipality" required>
                    <div class="invalid-feedback">
                        Sex Ratio is required
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <label for="municipality">Median Age</label>
                    <input [(ngModel)]="data.median_age" type="text" class="form-control" id="municipality" required>
                    <div class="invalid-feedback">
                        Median Age is required
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <label for="municipality">Doubling Time/Year</label>
                    <input [(ngModel)]="data.doubling" type="text" class="form-control" id="municipality" required>
                    <div class="invalid-feedback">
                        Doubling Time/Year is required
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <label for="municipality">Growth Rate</label>
                    <input [(ngModel)]="data.growth_rate" type="text" class="form-control" id="municipality" required>
                    <div class="invalid-feedback">
                        Growth Rate is required
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <label for="municipality">Households</label>
                    <input [(ngModel)]="data.households" type="text" class="form-control" id="municipality" required>
                    <div class="invalid-feedback">
                        Households is required
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <label for="municipality">Average Household Size</label>
                    <input [(ngModel)]="data.average_household_size" type="text" class="form-control" id="municipality" required>
                    <div class="invalid-feedback">
                        Average Household Size is required
                    </div>
                </div>

                <div class="col-md-4 mb-3">
                    <label for="municipality">Density</label>
                    <input [(ngModel)]="data.density" type="text" class="form-control" id="municipality" required>
                    <div class="invalid-feedback">
                        Density is required
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <label for="municipality">Child Age Dependency Ratio</label>
                    <input [(ngModel)]="data.child_dependency_ratio" type="text" class="form-control" id="municipality" required>
                    <div class="invalid-feedback">
                        Child Age Dependency Ratio is required
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <label for="municipality">Old Age Dependency Ratio</label>
                    <input [(ngModel)]="data.old_age_dependency_ratio" type="text" class="form-control" id="municipality" required>
                    <div class="invalid-feedback">
                        Old Age Dependency Ratio is required
                    </div>
                </div>

                <div class="col-md-12 mb-3 d-flex align-items-center" style="align-items: center;justify-content: center;">
                    <button style="min-width: 150px;" class="button" (click)="saveData()">Save</button>
                </div>
            </div>
        </div>

        <div *ngIf="!addData" class="front col-md-8">
            <!-- filters  -->
            <div class="row container">
                <div class="form-group col-md-4">
                    <label for="municipality">
                    <div *ngIf="municipalityIsLoading" class="spinner-border text-light  spinner-border-sm fast" role="status">
                        <span class="sr-only">Loading...</span>
                    </div>
                    Municipality</label>
                    <select (change)="getBarangays($event)" class="form-control" id="municipality">
                    <option selected disabled>Choose Municipality</option>
                    <option *ngFor="let municipality of municipalities" [value]="municipality.code">{{municipality.name}}</option>
                </select>
                </div>

                <div class="form-group col-md-4">
                    <label for="barangay">
                    <div *ngIf="barangayIsLoading" class="spinner-border text-light  spinner-border-sm fast" role="status">
                        <span class="sr-only">Loading...</span>
                    </div>
                    Barangay</label>
                    <select (change)="setBarangay($event)" class="form-control" id="barangay">
                    <option selected disabled>Choose Barangay</option>
                    <option *ngFor="let barangay of barangays">{{barangay.name}}</option>
                    </select>
                </div>
                <hr>
                <div class="form-group col-md-3">
                    <label for="year">Year</label>
                    <select [(ngModel)]="filter.year" class="form-control " id="year">
                        <option selected disabled>Choose Year</option>
                        <option *ngFor="let year of years">{{year}}</option>
                    </select>
                </div>
                <div class="col-md-1 mt-3">
                    <button (click)="setFilter()" class="button rounded">
                        <i class="fa fa-search"></i>
                    </button>
                </div>

            </div>

            <!-- maps  -->
            <!-- <br>
            <div style="margin-left: -25px;">
                <app-dynamic-mapping></app-dynamic-mapping>
            </div>
            <br><br><br> -->

            <!-- population profile  -->


            <div class="container row" style="position: relative;">
                <h2 class="pop">POPULATION PROFILE</h2>

                <table class="table ">
                    <tr>
                        <th>Coverage</th>
                        <td *ngIf="!coverage">{{filteredData.coverage || 'N/A'}}</td>
                        <td *ngIf="coverage"><input type="text" class="form-control w-50" [(ngModel)]="filteredData.coverage"></td>
                        <div>
                            <span *ngIf="!coverage" (click)="coverage == true ? coverage = false : coverage = true">
                                <i class="fa fa-pen"></i>
                            </span>
                            <span *ngIf="coverage" (click)="coverage == true ? coverage = false : coverage = true">
                                <i class="fa fa-times"></i>
                            </span>
                            <span style="margin-top: 20px;" *ngIf="coverage" (click)="updateFiltered(coverage == true ? coverage = false : coverage = true)">
                                <i class="fa fa-check text-success"></i>
                            </span>
                        </div>
                    </tr>
                    <tr>
                        <th>Total No. of Barangays</th>
                        <td>{{filteredData.barangays || 'N/A'}}</td>
                        <div>
                            <span *ngIf="!barangaysno" (click)="barangaysno == true ? barangaysno = false : barangaysno = true">
                                <i class="fa fa-pen"></i>
                            </span>
                            <span *ngIf="barangaysno" (click)="barangaysno == true ? barangaysno = false : barangaysno = true">
                                <i class="fa fa-times"></i>
                            </span>
                            <span *ngIf="barangaysno" style="margin-top: 20px;" (click)="updateFiltered(barangaysno == true ? barangaysno = false : barangaysno = true)">
                                <i class="fa fa-check text-success"></i>
                            </span>
                        </div>
                    </tr>
                    <tr>
                        <th>Total Land Area</th>
                        <td>{{filteredData.land_area || 'N/A'}}</td>
                        <div>
                            <span *ngIf="!land_area" (click)="land_area == true ? land_area = false : land_area = true">
                                <i class="fa fa-pen"></i>
                            </span>
                            <span *ngIf="land_area" (click)="land_area == true ? land_area = false : land_area = true">
                                <i class="fa fa-times"></i>
                            </span>
                            <span style="margin-top: 20px;" *ngIf="land_area" (click)="updateFiltered(land_area == true ? land_area = false : land_area = true)">
                                <i class="fa fa-check text-success"></i>
                            </span>
                        </div>
                    </tr>
                    <tr>
                        <th>Total Household Population</th>
                        <td>{{filteredData.household_population || 'N/A'}}</td>
                        <div>
                            <span *ngIf="!household_population" (click)="household_population == true ? household_population = false : household_population = true">
                                <i class="fa fa-pen"></i>
                            </span>
                            <span *ngIf="household_population" (click)="household_population == true ? household_population = false : household_population = true">
                                <i class="fa fa-times"></i>
                            </span>
                            <span style="margin-top: 20px;" *ngIf="household_population" (click)="updateFiltered(household_population == true ? household_population = false : household_population = true)">
                                <i class="fa fa-check text-success"></i>
                            </span>
                        </div>
                    </tr>
                    <tr>
                        <th>Male</th>
                        <td>{{filteredData.males || 'N/A'}}</td>
                        <div>
                            <span *ngIf="!males" (click)="males == true ? males = false : males = true">
                                <i class="fa fa-pen"></i>
                            </span>
                            <span *ngIf="males" (click)="males == true ? males = false : males = true">
                                <i class="fa fa-times"></i>
                            </span>
                            <span style="margin-top: 20px;" *ngIf="males" (click)="updateFiltered(males == true ? males = false : males = true)">
                                <i class="fa fa-check text-success"></i>
                            </span>
                        </div>
                    </tr>
                    <tr>
                        <th>Female</th>
                        <td>{{filteredData.females || 'N/A'}}</td>
                        <div>
                            <span *ngIf="!females" (click)="females == true ? females = false : females = true">
                                <i class="fa fa-pen"></i>
                            </span>
                            <span *ngIf="females" (click)="females == true ? females = false : females = true">
                                <i class="fa fa-times"></i>
                            </span>
                            <span style="margin-top: 20px;" *ngIf="females" (click)="updateFiltered(females == true ? females = false : females = true)">
                                <i class="fa fa-check text-success"></i>
                            </span>
                        </div>
                    </tr>
                    <tr>
                        <th>Sex Ratio</th>
                        <td>{{filteredData.sax_ration || 'N/A'}}</td>
                        <div>
                            <span *ngIf="!sax_ration" (click)="sax_ration == true ? sax_ration = false : sax_ration = true">
                                <i class="fa fa-pen"></i>
                            </span>
                            <span *ngIf="sax_ration" (click)="sax_ration == true ? sax_ration = false : sax_ration = true">
                                <i class="fa fa-times"></i>
                            </span>
                            <span style="margin-top: 20px;" *ngIf="sax_ration" (click)="updateFiltered(sax_ration == true ? sax_ration = false : sax_ration = true)">
                                <i class="fa fa-check text-success"></i>
                            </span>
                        </div>
                    </tr>
                    <tr>
                        <th>Median Age</th>
                        <td>{{filteredData.median_age || 'N/A'}}</td>
                        <div>
                            <span *ngIf="!median_age" (click)="median_age == true ? median_age = false : median_age = true">
                                <i class="fa fa-pen"></i>
                            </span>
                            <span *ngIf="median_age" (click)="median_age == true ? median_age = false : median_age = true">
                                <i class="fa fa-times"></i>
                            </span>
                            <span style="margin-top: 20px;" *ngIf="median_age" (click)="updateFiltered(median_age == true ? median_age = false : median_age = true)">
                                <i class="fa fa-check text-success"></i>
                            </span>
                        </div>
                    </tr>
                    <tr>
                        <th>Doubling Time/Year</th>
                        <td>{{filteredData.doubling || 'N/A'}}</td>
                        <div>
                            <span *ngIf="!doubling" (click)="doubling == true ? doubling = false : doubling = true">
                                <i class="fa fa-pen"></i>
                            </span>
                            <span *ngIf="doubling" (click)="doubling == true ? doubling = false : doubling = true">
                                <i class="fa fa-times"></i>
                            </span>
                            <span style="margin-top: 20px;" *ngIf="doubling" (click)="updateFiltered(doubling == true ? doubling = false : doubling = true)">
                                <i class="fa fa-check text-success"></i>
                            </span>
                        </div>
                    </tr>
                    <tr>
                        <th>Population Growth Rate</th>
                        <td>{{filteredData.growth_rate || 'N/A'}}</td>
                        <div>
                            <span *ngIf="!growth_rate" (click)="growth_rate == true ? growth_rate = false : growth_rate = true">
                                <i class="fa fa-pen"></i>
                            </span>
                            <span *ngIf="growth_rate" (click)="growth_rate == true ? growth_rate = false : growth_rate = true">
                                <i class="fa fa-times"></i>
                            </span>
                            <span style="margin-top: 20px;" *ngIf="growth_rate" (click)="updateFiltered(growth_rate == true ? growth_rate = false : growth_rate = true)">
                                <i class="fa fa-check text-success"></i>
                            </span>
                        </div>
                    </tr>
                    <tr>
                        <th>No. of Households</th>
                        <td>{{filteredData.households || 'N/A'}}</td>
                        <div>
                            <span *ngIf="!households" (click)="households == true ? households = false : households = true">
                                <i class="fa fa-pen"></i>
                            </span>
                            <span *ngIf="households" (click)="households == true ? households = false : households = true">
                                <i class="fa fa-times"></i>
                            </span>
                            <span style="margin-top: 20px;" *ngIf="households" (click)="updateFiltered(households == true ? households = false : households = true)">
                                <i class="fa fa-check text-success"></i>
                            </span>
                        </div>
                    </tr>
                    <tr>
                        <th>Average Household Size</th>
                        <td>{{filteredData.average_household_size || 'N/A'}}</td>
                        <div>
                            <span *ngIf="!average_household_size" (click)="average_household_size == true ? average_household_size = false : average_household_size = true">
                                <i class="fa fa-pen"></i>
                            </span>
                            <span *ngIf="average_household_size" (click)="average_household_size == true ? average_household_size = false : average_household_size = true">
                                <i class="fa fa-times"></i>
                            </span>
                            <span style="margin-top: 20px;" *ngIf="average_household_size" (click)="updateFiltered(average_household_size == true ? average_household_size = false : average_household_size = true)">
                                <i class="fa fa-check text-success"></i>
                            </span>
                        </div>
                    </tr>
                    <tr>
                        <th>Population Density</th>
                        <td>{{filteredData.density || 'N/A'}}</td>
                        <div>
                            <span *ngIf="!density" (click)="density == true ? density = false : density = true">
                                <i class="fa fa-pen"></i>
                            </span>
                            <span *ngIf="density" (click)="density == true ? density = false : density = true">
                                <i class="fa fa-times"></i>
                            </span>
                            <span style="margin-top: 20px;" *ngIf="density" (click)="updateFiltered(density == true ? density = false : density = true)">
                                <i class="fa fa-check text-success"></i>
                            </span>
                        </div>
                    </tr>
                    <tr>
                        <th>Age Dependency Ratio</th>
                        <td>{{filteredData.age_dependency_ratio || 'N/A'}}</td>
                        <div>
                            <span *ngIf="!age_dependency_ratio" (click)="age_dependency_ratio == true ? age_dependency_ratio = false : age_dependency_ratio = true">
                                <i class="fa fa-pen"></i>
                            </span>
                            <span *ngIf="age_dependency_ratio" (click)="age_dependency_ratio == true ? age_dependency_ratio = false : density = true">
                                <i class="fa fa-times"></i>
                            </span>
                            <span style="margin-top: 20px;" *ngIf="age_dependency_ratio" (click)="updateFiltered(age_dependency_ratio == true ? age_dependency_ratio = false : age_dependency_ratio = true)">
                                <i class="fa fa-check text-success"></i>
                            </span>
                        </div>
                    </tr>
                    <tr>
                        <th>Child Dependency Ratio</th>
                        <td>{{filteredData.child_dependency_ratio || 'N/A'}}</td>
                        <div>
                            <span *ngIf="!child_dependency_ratio" (click)="child_dependency_ratio == true ? child_dependency_ratio = false : child_dependency_ratio = true">
                                <i class="fa fa-pen"></i>
                            </span>
                            <span *ngIf="child_dependency_ratio" (click)="child_dependency_ratio == true ? child_dependency_ratio = false : child_dependency_ratio = true">
                                <i class="fa fa-times"></i>
                            </span>
                            <span style="margin-top: 20px;" *ngIf="child_dependency_ratio" (click)="updateFiltered(child_dependency_ratio == true ? child_dependency_ratio = false : child_dependency_ratio = true)">
                                <i class="fa fa-check text-success"></i>
                            </span>
                        </div>
                    </tr>
                    <tr>
                        <th>Old-Age Dependency Ratio</th>
                        <td>{{filteredData.old_age_dependency_ratio || 'N/A'}}</td>
                        <div>
                            <span *ngIf="!old_age_dependency_ratio" (click)="old_age_dependency_ratio == true ? old_age_dependency_ratio = false : old_age_dependency_ratio = true">
                                <i class="fa fa-pen"></i>
                            </span>
                            <span *ngIf="old_age_dependency_ratio" (click)="old_age_dependency_ratio == true ? old_age_dependency_ratio = false : old_age_dependency_ratio = true">
                                <i class="fa fa-times"></i>
                            </span>
                            <span style="margin-top: 20px;" *ngIf="old_age_dependency_ratio" (click)="updateFiltered(old_age_dependency_ratio == true ? old_age_dependency_ratio = false : old_age_dependency_ratio = true)">
                                <i class="fa fa-check text-success"></i>
                            </span>
                        </div>
                    </tr>
                </table>
            </div>

            <!-- age distribution  -->
            <div class="row container chart-container">
                <h2 class="pop2 col-md-12">POPULATION PYRAMID</h2>
                <div id="male-and-female" class="w-100">
                    <div class="spinner-border text-warning fast" role="status">
                        <span class="sr-only">Loading...</span>
                    </div>
                </div>
            </div>
            <br>

            <!-- top populated  -->
            <div class="row container">
                <div class="form-group col-md-12">
                    <h2 class="pop">TOP POPULATED MUNCIPALITIES</h2>
                    <p style="color:gray">All over Iloilo</p>
                    <div *ngIf="population.top.length == 0 " class="flex-container">
                        <div class="spinner-border text-light fast" role="status">
                            <span class="sr-only">Loading...</span>
                        </div>
                    </div>
                    <ul class="list-group" [@listAnimation]="population.top.length">
                        <li class="list-group-item barangays">
                            <i style="color:transparent;font-size: 20px;" class="fas fa-map-marker-alt mr-auto"></i>
                            <p class="sub-title">MUNICIPALITY</p>
                            <p class="sub-title">TOTAL POPULATION</p>
                            <p class="sub-title">PERCENTAGE</p>
                        </li>
                        <li *ngFor="let municipality of population.top" class="list-group-item barangays">
                            <i style="color:orangered;font-size: 20px;" class="fas fa-map-marker-alt mr-auto"></i>
                            <p>{{municipality.name}}</p>
                            <p>{{municipality.total}}</p>
                            <p>
                                <ng2-odometer class="low" [number]=" municipality.total / population.total * 100 | number:'1.0-0' " [config]="{ animation: 'slide', format: 'd', value: 0, auto: true }">
                                </ng2-odometer>%</p>

                        </li>
                    </ul>
                </div>

                <div class="form-group col-md-6">
                    <div class="map w-100 col-md-12" #map id="map" style="height: 100%; ">
                    </div>
                </div>
            </div>
        </div>

        <div class="side col-md-4">
            <h3>Provincial Officials</h3>
            <hr>
            <app-provincial-officials></app-provincial-officials>
            <br>
            <app-sb-members></app-sb-members>
        </div>
    </div>
</div>